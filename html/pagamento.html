<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubFomeZero</title>
    <link rel="shortcut icon" href="../imagens/shopping-bag-2.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/pagamento.css">
</head>
<body>
    <div class="container">
        <div class="payment-box">
            <h1>HubFomeZero</h1>
            <div class="account-type">
                <!-- <img src="../imagens/doador.png" alt=""> -->
                <h2>Doador</h2>
            </div>
           
               <!-- linha do tempo -->
               <div class="timeline-container">
                <div class="timeline-step">
                  <div class="circle">1</div>
                  <p>Escolha</p>
                </div>
                <div class="timeline-step active">
                  <div class="circle">2 </div> 
                  <p>Pagamento</p>
                </div>
                <div class="timeline-step">
                  <div class="circle">3</div>
                  <p>Confirmação</p>
                </div>
              </div>

            <!-- <h4>Pagamento da doação</h4> -->
            <form action="confirmacao.html" method="post">
                <!-- Novo quadro para identificação do pagador -->
                <div class="form-group">
                    <!-- <h2>Identificação do Pagador</h2> -->
                </div>
                <div class="form-group">
                    <label for="nome-pagador">Nome Completo</label>
                    <input type="text" id="nome" name="nome" required>
                </div>
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" name="cpf"  maxlength="11">
                </div>
                <div class="form-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="nome">Nome do Titular do Cartão</label>
                    <input type="text" id="carta" name="carto" >
                </div>
                <div class="form-group">
                    <label for="numero-cartao">Número do Cartão</label>
                    <input type="text" id="numero-cartao" name="numero-cartao"  maxlength="16">
                </div>
                <div class="form-group">
                    <label for="validade">Validade</label>
                    <input type="text" id="validade" name="validade" placeholder="MM/AA" >
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" name="cvv"  maxlength="3">
                </div>
                <div class="form-group">
                    <label for="valor">Valor da Cesta</label>
                    <input type="text" id="valor" name="valor" value="R$ 200,00" readonly>
                </div>

                
                <!-- <a href="./confirmaPagamento.html" class="btn" id="btn">Confirmar Pagamento</a> -->
            </form>
            <button class="btn" id="btn2">Enviar Email</button>
        </div>
    </div>
    <!-- <script src="/js/loadingPagamento.js"></script> -->

    <!-- Script para importar o EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        // Inicialize o EmailJS ao carregar a página
        (function () {
            emailjs.init('XaduNiGEGvrL7Ossn'); // Substitua pelo seu USER_ID do EmailJS
        })();

        // Seleciona o botão e adiciona o listener para clique
        let btn2 = document.getElementById('btn2');
        btn2.addEventListener('click', sendMail);

        function sendMail() {
            // Captura o valor do email na hora do envio
            let emailValue = document.querySelector('#email').value;
            let nome = document.querySelector('#nome').value;

            if (!emailValue) {
                alert('Por favor, preencha o campo de email.');
                return;
            }

            let params = {
                email: emailValue,
                message: "Mensagem de teste", // Ajuste conforme o template
                to_name: nome // Ajuste conforme o template
            };

            // IDs do serviço e do template
            let serviceID = 'service_7hrj3ce';
            let templateID = 'template_xxel6jv';

            // Envia o email com EmailJS
            emailjs.send(serviceID, templateID, params)
                .then((response) => {
                    alert('Email enviado com sucesso!');
                    console.log('SUCESSO:', response.status, response.text);
                    window.location.href = '/html/loadingPagamento.html'
                })
                .catch((error) => {
                    alert('Erro ao enviar email. Tente novamente.');
                    console.error('ERRO:', error);
                });


           
           
        }
    </script>



  
</body>
</html>
